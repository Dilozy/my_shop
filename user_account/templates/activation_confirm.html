<!DOCTYPE html>
<html>
<body>
  <script>
    const uidb64 = "{{ uidb64 }}";
    const token = "{{ token }}";
    
    fetch(`/users/activate/${uidb64}/${token}/`, {
  method: 'PATCH',
  headers: {
    'X-CSRFToken': '{{ csrf_token }}',
    'Content-Type': 'application/json',
  },
})
.then(response => {
  if (!response.ok) {
    throw new Error(`HTTP error! Status: ${response.status}`);
  }
  return response.json();
})
.then(data => {
  // Проверяем все возможные поля ответа
  const message = data.status || data.error || data.detail || JSON.stringify(data);
  alert(message);
  
  // Перенаправляем после успешной активации
  if (data.status || data.detail) {
    window.location.href = '/users/';
  }
})
.catch(error => {
  alert("Ошибка: " + error.message);
});
  </script>
</body>
</html>